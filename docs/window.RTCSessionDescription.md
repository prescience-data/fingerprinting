---
title: window.RTCSessionDescription
layout: default
---
# window.RTCSessionDescription
## Purpose
Part of the WebRTC API, `RTCSessionDescription` is an interface representing the parameters of a session. It encapsulates the Session Description Protocol (SDP) data, which details the media codecs, network candidates, and security information required to connect to a remote peer.

## Fingerprinting Usage
The `RTCSessionDescription` object, specifically its `sdp` property, is a high-entropy source for fingerprinting and a critical component in bot detection. It is generated by calling `createOffer()` or `createAnswer()` on an `RTCPeerConnection` instance.

1.  **IP Address Leakage**: This is the most well-known use of WebRTC for fingerprinting. The SDP data contains Interactive Connectivity Establishment (ICE) candidates. These candidates list all possible network paths to the user, which often include:
    *   The user's **local IP address** (e.g., `192.168.1.5`).
    *   The user's **public IP address**, as discovered by contacting a STUN (Session Traversal Utilities for NAT) server. This can reveal the user's true public IP even when they are behind a proxy or most consumer-grade VPNs.

2.  **Hardware and Software Enumeration**: The SDP contains a detailed list of supported audio and video codecs (`a=rtpmap` attributes). This list is highly specific to:
    *   **Browser & Version**: Chrome, Firefox, and Safari offer different sets of codecs.
    *   **Operating System**: The underlying OS affects which codecs are available.
    *   **Hardware**: The presence of specific hardware with video encoding/decoding acceleration (e.g., for H.264) changes the codec list.
    The exact list of codecs, their priority order, and their specific parameters (`a=fmtp`) create a highly unique and stable fingerprint.

3.  **Bot Detection & Consistency Checks**:
    *   **Anomalous SDP**: Headless browsers (like Puppeteer/Playwright) or modified browser engines may generate a default or minimal SDP that is easily distinguishable from a real user's browser. For example, they might lack any ICE candidates or list a very small, generic set of codecs.
    *   **Inconsistencies**: Anti-bot systems cross-reference the SDP fingerprint with other signals. If a browser's User-Agent string claims it is "Chrome on Windows" but the SDP codec profile matches "Firefox on Linux," it is a strong indication of spoofing.
    *   **Failure to Generate**: If a script attempts to generate an SDP offer and fails, it can signal that the user has disabled WebRTC (e.g., via an extension), which is itself a data point used in classification.

## Sample Code
This snippet demonstrates how to create a WebRTC peer connection and generate an offer to access the SDP data for analysis.

```javascript
// This function extracts the SDP, which contains fingerprintable information.
async function getSdpFingerprint() {
  try {
    // 1. Create a peer connection. No signaling server is needed for this.
    // The 'iceServers' option is required, even if empty for local generation.
    const peerConnection = new RTCPeerConnection({
      iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
    });

    // 2. Create a dummy data channel. This is necessary for some browsers
    // to generate ICE candidates in the offer.
    peerConnection.createDataChannel('');

    // 3. Create an offer. This generates the RTCSessionDescription.
    const offer = await peerConnection.createOffer();
    
    // 4. The 'sdp' property contains the raw fingerprinting data.
    const sdp = offer.sdp;

    // Anti-bot logic would now parse this SDP string to extract IPs,
    // codecs, and other attributes for analysis.
    console.log('--- SDP Data ---');
    console.log(sdp);
    
    // Example of extracting local IP addresses from candidates
    const ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g;
    const candidates = sdp.match(/a=candidate:.*/g) || [];
    candidates.forEach(candidate => {
        const ip = candidate.match(ipRegex);
        if (ip) {
            console.log('Found IP in ICE candidate:', ip[0]);
        }
    });

    peerConnection.close();
    return sdp;

  } catch (error) {
    // Failure to create an offer is also a fingerprinting signal.
    console.error('WebRTC SDP generation failed:', error);
    return null;
  }
}

// Run the function to demonstrate.
getSdpFingerprint();
```