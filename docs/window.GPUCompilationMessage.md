---
title: window.GPUCompilationMessage
layout: default
---
# window.GPUCompilationMessage
## Purpose
The `GPUCompilationMessage` interface, part of the WebGPU API, represents a single diagnostic message (informational, warning, or error) generated by the GPU driver's shader compiler when a shader module is created via `GPUDevice.createShaderModule()`.

## Fingerprinting Usage
This API is a high-entropy source for fingerprinting and a powerful tool for bot detection. Its utility comes from the fact that shader compilation is a complex process handled directly by the underlying GPU hardware and driver stack, exposing implementation-specific details.

*   **Hardware and Driver Fingerprinting:** The text, type (`info`, `warning`, `error`), and line numbers of compilation messages are highly dependent on the specific GPU vendor (NVIDIA, AMD, Intel, Apple), GPU model, and installed driver version. A carefully crafted shader, designed to be syntactically valid but trigger non-critical warnings or vendor-specific optimizations, can produce unique message strings. These strings act as a detailed signature of the user's graphics stack.

*   **Inconsistency Detection:** This is a primary use case for bot detection. A bot may spoof its User-Agent string to claim it is on "Windows 11 with an NVIDIA RTX 4080". However, when a WebGPU shader is compiled, the resulting compilation messages might be characteristic of a Mesa driver on Linux or a SwiftShader software renderer. This mismatch between the claimed platform (User-Agent, `navigator.platform`) and the observed hardware signature (GPU messages) is a high-confidence signal that the environment is fraudulent.

*   **Headless Browser and VM Detection:** Many headless browsers (like older versions of Puppeteer/Playwright) and virtualized environments either lack WebGPU support entirely or use a software-based renderer (e.g., SwiftShader).
    *   **Failure to Initialize:** The inability to get a `GPUDevice` is a strong signal of a limited environment.
    *   **Software Renderer Signature:** If a software renderer is used, its compilation messages are generic and distinctly different from any real hardware. Detecting the SwiftShader signature is a reliable way to identify a non-standard browsing environment common to bots.

## Sample Code
This snippet attempts to compile a simple WebGPU Shading Language (WGSL) shader and collects any resulting compilation messages to form a fingerprint.

```javascript
async function getGpuCompilerFingerprint() {
  if (!navigator.gpu) {
    return "WebGPU not supported";
  }

  try {
    const adapter = await navigator.gpu.requestAdapter();
    if (!adapter) {
      return "WebGPU adapter not available";
    }
    const device = await adapter.requestDevice();

    // This shader is simple, but a real-world fingerprinting script
    // would use a more complex or "tricky" shader designed to
    // provoke specific warnings or info messages on different drivers.
    const shaderCode = `
      @vertex
      fn main(@builtin(vertex_index) vi : u32) -> @builtin(position) vec4<f32> {
        var pos = array<vec2<f32>, 3>(
          vec2<f32>(0.0, 0.5),
          vec2<f32>(-0.5, -0.5),
          vec2<f32>(0.5, -0.5)
        );
        return vec4<f32>(pos[vi], 0.0, 1.0);
      }
    `;

    const shaderModule = device.createShaderModule({ code: shaderCode });
    const compilationInfo = await shaderModule.getCompilationInfo();

    if (compilationInfo.messages.length === 0) {
      return "No compilation messages";
    }

    // Create a consistent fingerprint from the messages.
    const fingerprint = compilationInfo.messages.map(msg =>
      `${msg.type}:${msg.lineNum}:${msg.linePos}:${msg.message}`
    ).join(';');

    return fingerprint;

  } catch (error) {
    return `Error: ${error.message}`;
  }
}

// Usage:
getGpuCompilerFingerprint().then(fingerprint => {
  console.log("GPU Compiler Fingerprint:", fingerprint);
  // Example output on an NVIDIA card on Windows:
  // "info:0:0:Tint generated 25 vertex shader workgroups of size 1x1x1."
  // Example output in a bot environment with SwiftShader:
  // "info:0:0:Workgroup size is not specified for entry point main. Defaulting to 1,1,1"
});
```